/* ═══════════════════════════════════════════════════════════════════════════
   ROTARY KNOB — Moog-style hardware potentiometer
   Drag vertically to change value, with tick marks and indicator line
   ═══════════════════════════════════════════════════════════════════════════ */

.knob-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-2);
  user-select: none;
}

/* ─── Size Variants ─────────────────────────────────────────────────────── */
.knob-small {
  --knob-size: 40px;
  --knob-body-size: 32px;
  --knob-cap-size: 14px;
  --knob-tick-length: 6px;
  --indicator-width: 2px;
  --indicator-height: 10px;
}

.knob-medium {
  --knob-size: 56px;
  --knob-body-size: 44px;
  --knob-cap-size: 18px;
  --knob-tick-length: 8px;
  --indicator-width: 3px;
  --indicator-height: 14px;
}

.knob-large {
  --knob-size: 72px;
  --knob-body-size: 56px;
  --knob-cap-size: 24px;
  --knob-tick-length: 10px;
  --indicator-width: 4px;
  --indicator-height: 18px;
}

/* ─── Label ─────────────────────────────────────────────────────────────── */
.knob-label {
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  font-weight: 500;
  color: var(--color-text-label);
  text-transform: uppercase;
  letter-spacing: 1.5px;
  text-align: center;
  white-space: nowrap;
}

/* ─── The Knob Assembly ─────────────────────────────────────────────────── */
.knob {
  width: var(--knob-size);
  height: var(--knob-size);
  position: relative;
  cursor: grab;
  border-radius: 50%;
}

.knob:active,
.knob.dragging {
  cursor: grabbing;
}

/* ─── Tick Marks ────────────────────────────────────────────────────────── */
.knob-ticks {
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.knob-tick {
  position: absolute;
  width: 1px;
  height: var(--knob-tick-length);
  background: var(--color-text-tertiary);
  left: 50%;
  top: 0;
  transform-origin: center calc(var(--knob-size) / 2);
  opacity: 0.4;
}

.knob-tick.major {
  width: 2px;
  background: var(--color-text-secondary);
  opacity: 0.6;
}

.knob-tick.center {
  background: var(--color-glow-primary);
  opacity: 0.8;
}

/* ─── Knob Body (the rotating part) ─────────────────────────────────────── */
.knob-body {
  position: absolute;
  top: 50%;
  left: 50%;
  width: var(--knob-body-size);
  height: var(--knob-body-size);
  transform: translate(-50%, -50%);
  border-radius: 50%;
  /* Classic brushed metal look */
  background:
    radial-gradient(circle at 35% 35%,
      #4a4a4a 0%,
      #3a3a3a 20%,
      #2d2d2d 50%,
      #1f1f1f 80%,
      #151515 100%
    );
  box-shadow:
    /* Outer ring glow */
    0 0 0 2px rgba(0, 0, 0, 0.5),
    /* Depth shadow */
    0 4px 8px rgba(0, 0, 0, 0.6),
    0 2px 4px rgba(0, 0, 0, 0.4),
    /* Inner highlight */
    inset 0 2px 4px rgba(255, 255, 255, 0.05),
    inset 0 -2px 4px rgba(0, 0, 0, 0.3);
  transition: box-shadow 0.15s ease;
}

.knob.dragging .knob-body {
  box-shadow:
    0 0 0 2px rgba(0, 255, 170, 0.3),
    0 4px 8px rgba(0, 0, 0, 0.6),
    0 2px 4px rgba(0, 0, 0, 0.4),
    0 0 15px rgba(0, 255, 170, 0.2),
    inset 0 2px 4px rgba(255, 255, 255, 0.05),
    inset 0 -2px 4px rgba(0, 0, 0, 0.3);
}

/* ─── Indicator Line (the pointer) ──────────────────────────────────────── */
.knob-indicator {
  position: absolute;
  width: var(--indicator-width);
  height: var(--indicator-height);
  background: var(--color-glow-primary);
  border-radius: var(--indicator-width);
  left: 50%;
  top: 4px;
  transform: translateX(-50%);
  box-shadow: 0 0 6px var(--color-glow-primary);
}

/* Color variants for indicator */
.knob-color-secondary .knob-indicator {
  background: var(--color-glow-secondary);
  box-shadow: 0 0 6px var(--color-glow-secondary);
}

.knob-color-hot .knob-indicator {
  background: var(--color-glow-hot);
  box-shadow: 0 0 6px var(--color-glow-hot);
}

.knob-color-cool .knob-indicator {
  background: var(--color-glow-cool);
  box-shadow: 0 0 6px var(--color-glow-cool);
}

/* ─── Center Cap ────────────────────────────────────────────────────────── */
.knob-cap {
  position: absolute;
  top: 50%;
  left: 50%;
  width: var(--knob-cap-size);
  height: var(--knob-cap-size);
  transform: translate(-50%, -50%);
  border-radius: 50%;
  background:
    radial-gradient(circle at 40% 40%,
      #3a3a3a 0%,
      #252525 50%,
      #1a1a1a 100%
    );
  box-shadow:
    inset 0 1px 2px rgba(255, 255, 255, 0.1),
    inset 0 -1px 2px rgba(0, 0, 0, 0.3);
  pointer-events: none;
}

/* ─── Value Display ─────────────────────────────────────────────────────── */
.knob-value {
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  color: var(--color-glow-primary);
  text-shadow: 0 0 8px rgba(0, 255, 170, 0.5);
  letter-spacing: 0.5px;
  min-width: 50px;
  text-align: center;
}

.knob-unit {
  color: var(--color-text-tertiary);
  margin-left: 2px;
  text-shadow: none;
}

/* Color variants for value display */
.knob-color-secondary + .knob-value {
  color: var(--color-glow-secondary);
  text-shadow: 0 0 8px rgba(255, 107, 53, 0.5);
}

.knob-color-hot + .knob-value {
  color: var(--color-glow-hot);
  text-shadow: 0 0 8px rgba(255, 45, 85, 0.5);
}

.knob-color-cool + .knob-value {
  color: var(--color-glow-cool);
  text-shadow: 0 0 8px rgba(0, 212, 255, 0.5);
}
